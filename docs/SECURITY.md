# SECURITY

## 親ゲートの意図
- 子どもモードでは親向け編集導線を非表示にし、誤操作を防ぐ。
- 親モード解除は隠しジェスチャ（3本指2秒長押し）+ 4点シーケンス。
- 連続失敗時はクールダウンを入れ、連打突破を抑止。

## バックアップ暗号化の前提
- `.kybk` は AES-GCM で暗号化。
- バックアップコンテナは **formatVersion=2 固定**。
- 鍵導出は **PBKDF2-HMAC-SHA256**（反復あり）を使用。
- 復元は **現行形式のみ対応**（旧形式バックアップは非対応）。
- 復元時は復号/デコード成功後にデータ置換を実行。

## ログに出してはいけない情報
- パスフレーズ
- 復号前/復号後のバックアップ平文データ
- 緊急コードなど親ゲート解除情報
- ユーザー追加画像の実体データ（Base64含む）

## 安全運用メモ
- リリース前に、保存失敗時のユーザー通知方針を必ず確認。
- 互換変換は行わないため、必要時は親モードのデータリセットで再作成する。
